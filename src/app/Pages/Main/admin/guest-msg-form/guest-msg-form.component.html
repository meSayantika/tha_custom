<div class="content-div">
  <mat-card>
    <mat-card-title>
      <strong> <mat-icon>person</mat-icon> Guest Messages </strong>
    </mat-card-title>
    <hr> <br>
    <mat-card-content>
      <div class="row">
        <div class="col-7" style="border-right:0.5px solid rgb(174, 172, 172)">
          <h4>
            <strong>
              Add a department manager and schedule timings.
            </strong>
          </h4>
          <form [formGroup]="mngForm">
            <div hidden class="row">
              <div class="col-12">
                <label for="">Department</label>
                <!-- <select name="dept_name" formControlName="dept_name" id="" class="form-control" (change)="getEmp()">
                  <option value="">Select department</option>
                  <option *ngFor="let dept of getDeptData.msg" value="{{dept.id}}">{{dept.dept_name}}</option>
                </select> -->
                <ng-multiselect-dropdown style="width:100%;background-color: white;"
                [placeholder]="'Select one'"
                [settings]="dropdownSettings"
                [data]="getDeptData.msg"
                [(ngModel)]="selectedDepts"
                (onSelect)="onItemSelect($event)"
                (onSelectAll)="onSelectAll($event)"
                formControlName="dept_name"
              >
              </ng-multiselect-dropdown>
              </div>

            </div>
            <div class="row mt-3">
              <div class="col-12">
                <label for="">Name</label>
                <input type="text" class="form-control" formControlName="mng_name" name="mng_name">
                <!-- <select name="mng_name" formControlName="mng_name" id="" class="form-control" (change)="getEmpDtls()"> -->
                  <!-- <option value="">Select name</option>
                  <option *ngFor="let emp of getEmpData?.msg" value="{{emp.id}}" [hidden]="emp.manager_flag!='Y'">{{emp.emp_name}}</option>
                </select> -->
              </div>
            </div>
            <div class="row mt-3">
              <label for="">Message Category</label>
              <ng-multiselect-dropdown style="width:100%;background-color: white;"
              [placeholder]="'Select one'"
              [settings]="dropdownSettings"
              [data]="msgList"
              [(ngModel)]="selectedItems"
              (onSelect)="onItemSelect($event)"
              (onSelectAll)="onSelectAll($event)"
              formControlName="msg_type"
            >
            </ng-multiselect-dropdown>
            </div>
            <div class="row mt-3">
              <div class="col-6">
                <label for="">Email</label>
                <input readonly type="text" class="form-control" formControlName="m_email" name="m_email">
              </div>
              <div class="col-6">
                <label for="">Phone</label>
                <input readonly type="text" class="form-control" formControlName="m_phone" name="m_phone">
              </div>
            </div>
            
            <div class="row p-4">
              <div class="col-12 text-muted">
                Please enter the department manager that will manage this department (Send push notifications and manage
                TAWK's incoming and outgoing CALL/CHAT)
              </div>
            </div>
            <hr>
            <h4>
              <strong>
                Add a schedule timings.
              </strong>
            </h4>
            <div class="p-4 ml-4">
              <table>
                <th class="border-bottom">
                  Day
                </th>
                <!-- <th class="text-center border-bottom">
                  Off
                </th> -->
                <th class="border-bottom">
                  Start
                </th>
                <th class="border-bottom">
                  End
                </th>
                
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_mon" name="check_mon"> &nbsp; <span class="text-muted"> Monday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_mon_off" name="check_mon_off">  
                  </td> -->
                  <td class="text-center">
                    <input [readonly]="!this.m.check_mon.value" type="time" class="form-control" formControlName="mon_time_start" style="width: 75%"  name="mon_time_start" [value]="this.m.check_mon.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input [readonly]="!this.m.check_mon.value" type="time" class="form-control" formControlName="mon_time_end"  style="width: 75%" name="mon_time_end" [value]="this.m.check_mon.value?'23:59':''">
                  </td>
                </tr>
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_tue" name="check_tue"> &nbsp; <span class="text-muted"> Tuesday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_tue_off" name="check_tue_off">  
                  </td> -->
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_tue.value" class="form-control" formControlName="tue_time_start" style="width: 75%"  name="tue_time_start" [value]="this.m.check_tue.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_tue.value" class="form-control" formControlName="tue_time_end"  style="width: 75%" name="tue_time_end" [value]="this.m.check_tue.value?'23:59':''">
                  </td>
                </tr>
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_wed" name="check_wed"> &nbsp; <span class="text-muted"> Wednesday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_wed_off" name="check_wed_off">  
                  </td> -->
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_wed.value" class="form-control" formControlName="wed_time_start" style="width: 75%"  name="wed_time_start" [value]="this.m.check_wed.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_wed.value" class="form-control" formControlName="wed_time_end"  style="width: 75%" name="wed_time_end" [value]="this.m.check_wed.value?'23:59':''">
                  </td>
                </tr>
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_thur" name="check_thur"> &nbsp; <span class="text-muted"> Thursday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_thur_off" name="check_thur_off">  
                  </td> -->
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_thur.value" class="form-control" formControlName="thur_time_start" style="width: 75%"  name="thur_time_start" [value]="this.m.check_thur.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_thur.value" class="form-control" formControlName="thur_time_end"  style="width: 75%" name="thur_time_end" [value]="this.m.check_thur.value?'23:59':''">
                  </td>
                </tr>
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_fri" name="check_fri"> &nbsp; <span class="text-muted"> Friday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_fri_off" name="check_fri_off">  
                  </td> -->
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_fri.value" class="form-control" formControlName="fri_time_start" style="width: 75%"  name="fri_time_start" [value]="this.m.check_fri.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_fri.value" class="form-control" formControlName="fri_time_end"  style="width: 75%" name="fri_time_end" [value]="this.m.check_fri.value?'23:59':''">
                  </td>
                </tr>
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_sat" name="check_sat"> &nbsp; <span class="text-muted"> Saturday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_sat_off" name="check_sat_off">  
                  </td> -->
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_sat.value"class="form-control" formControlName="sat_time_start" style="width: 75%"  name="sat_time_start" [value]="this.m.check_sat.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_sat.value" class="form-control" formControlName="sat_time_end"  style="width: 75%" name="sat_time_end" [value]="this.m.check_sat.value?'23:59':''">
                  </td>
                </tr>
                <tr class="mt-3 p-2 border-bottom">
                  <td >
                    <input type="checkbox" formControlName="check_sun" name="check_sun"> &nbsp; <span class="text-muted"> Sunday </span> 
                  </td>
                  <!-- <td class="text-center">
                    <input type="checkbox" formControlName="check_sun_off" name="check_sun_off">  
                  </td> -->
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_sun.value" class="form-control" formControlName="sun_time_start" style="width: 75%"  name="sun_time_start" [value]="this.m.check_sun.value?'00:00':''">
                  </td >
                  <td class="text-center">
                    <input type="time" [readonly]="!this.m.check_sun.value" class="form-control" formControlName="sun_time_end"  style="width: 75%" name="sun_time_end" [value]="this.m.check_sun.value?'23:59':''">
                  </td>
                </tr>
              </table>
              <div class="row mt-5">
                <div class="col-9"></div>
                <div class="col-3">
                  <button [disabled]="disableSave" class="btn btn-success col-6" mat-raised-button (click)="add_manager()" >
                    Save
                  </button>
                <!-- <button class="btn btn-danger" mat-raised-button>  Generate Email </button>  -->
                </div>
              </div>
            </div>
          
          </form>
        </div>
        <!-- <div class="vl"></div> -->
        <div class="col-5">
          <h4>
            <strong>
              Send welcome email to department manager.
            </strong>
          </h4>
          <form [formGroup]="letterForm">
            <div class="row">
              <div class="col-12">
                <label for="">Subject line</label>
                <input readonly type="text" [(ngModel)]="subjectLine" class="form-control" name="subject" formControlName="subject">
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-12">
                <label for="">Email</label>

                <textarea readonly name="email-text" id="" formControlName="email_text" [(ngModel)]="email_body"
                  (input)="change()" class="form-control" cols="30" rows="10"></textarea>
              </div>
            </div>
            <div hidden class="row mt-4">
              <div class="col-12">
                <label for="">Preview</label>
                <textarea readonly name="preview" formControlName="preview" id="" cols="30" rows="10"
                  class="form-control">
          </textarea>
              </div>
            </div>
          </form>
          <div class="row mt-4">
            <div class="col-12">
              <button [disabled]="disabledEmail" class="btn btn-danger col-12" [disabled]="disabledEmail" mat-raised-button (click)="gen_body()"> Generate Email</button>
            </div>
          </div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <div class="row mt-4"></div>
          <!-- <div class="row mt-4"></div> -->
          <!-- <div class="row mt-3"></div> -->
          <div class="row mt-4">
            <div class="col-6"></div>
            <div class="col-1"></div>
            <div class="col-4 ml-5 float-end"> 
              <button class="btn btn-danger col-12" mat-raised-button (click)="sendEmail()" >
                Send Email
              </button>
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<div class="fab-main">
  <button matTooltip="Back" mat-mini-fab (click)="go_prev_page()"> <mat-icon>arrow_back</mat-icon> </button>

    </div>